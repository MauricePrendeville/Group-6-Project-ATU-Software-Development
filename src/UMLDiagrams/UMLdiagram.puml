@startuml HotelSystemClassDiagram
' Title
title Hotel Booking System - Class Diagram

' Packages (logical grouping)
package "Core" {
  class HotelSystem {
    - bookingManager: BookingManager
    - roomManager: RoomManager
    - userManager: UserManager
    - paymentManager: PaymentManager
    - currentUser: User
    + initialize(): void
    + login(email, password): boolean
    + logout(): void
    + registerGuest(name,email,phone): Guest
    + createBooking(roomNumber, checkIn, checkOut, includeBreakfast): Booking
    + createBooking(guestId, roomNumber, checkIn, checkOut, includeBreakfast): Booking
    + cancelBooking(bookingId): void
    + checkInGuest(bookingId): void
    + checkOutGuest(bookingId): Payment
    + generateReport(type): Report
  }

  class Main {
    + main(args): void
  }
}

package "Managers" {
  class BookingManager {
    - bookings: Map<String,Booking>
    + createBooking(guestId, roomNumber, checkIn, checkOut, totalPrice, includeBreakfast): Booking
    + getBooking(id): Booking
    + getBookingsByGuest(guestId): List<Booking>
    + isRoomAvailable(roomNumber, checkIn, checkOut): boolean
    + cancelBooking(bookingId): void
  }

  class RoomManager {
    - rooms: Map<String,Room>
    + addRoom(room): void
    + getRoom(number): Room
    + getAvailableRooms(checkIn, checkOut, type): List<Room>
    + updateRoomStatus(roomNumber, status): void
  }

  class UserManager {
    - users: Map<String,User>
    + addUser(user): void
    + authenticateUser(email,password): User
    + getUser(id): User
    + getUsersByRole(role): List<User>
  }

  class PaymentManager {
    - payments: Map<String,Payment>
    + createPayment(bookingId, amount, method): Payment
    + processPayment(paymentId): boolean
    + refundPayment(paymentId): boolean
    + getPaymentsByBooking(bookingId): List<Payment>
    + getPaymentStatistics(): Map
  }
}

package "Model" {
  abstract class User {
    - userId: String
    - name: String
    - email: String
    - phone: String
    - password: String
    - role: UserRole
    + validatePassword(pw): boolean
    + getPermissions(): String
    + hasPermission(permission): boolean
  }
  class Admin
  class ReceptionStaff
  class Manager
  class Cleaner
  class Guest {
    - bookingHistory: List<String>
    - returningGuest: boolean
    - paymentMethod: PaymentMethod
    + addBooking(bookingId): void
    + getBookingHistory(): List<String>
  }

  class Booking {
    - bookingId: String
    - guestId: String
    - roomNumber: String
    - checkInDate: LocalDate
    - checkOutDate: LocalDate
    - totalPrice: double
    - breakfastIncluded: boolean
    - status: BookingStatus
    - bookingDate: LocalDate
    + getNumberOfNights(): long
    + modifyBooking(newCheckIn,newCheckOut,newTotalPrice): void
    + cancelBooking(): void
  }

  abstract class Room {
    - roomNumber: String
    - roomType: RoomType
    - basePrice: double
    - status: RoomStatus
    - capacity: int
    + calculatePrice(nights): double
    + calculatePrice(nights, includeBreakfast): double
    + updateStatus(status): void
  }
  class StandardRoom
  class SuperiorRoom
  class SuiteRoom

  class Payment {
    - paymentId: String
    - bookingId: String
    - amount: double
    - method: PaymentMethod
    - status: PaymentStatus
    - transactionId: String
    - createdAt: LocalDateTime
    - updatedAt: LocalDateTime
    + processPayment(): boolean
    + fail(txnId): boolean
    + refund(): boolean
    + generateInvoice(): String
  }

  class Report {
    - type: String
    + addData(key, value): void
    + generateContent(): String
  }

  enum UserRole
  enum RoomType
  enum RoomStatus
  enum BookingStatus
  enum PaymentMethod
  enum PaymentStatus
}

' Relationships
HotelSystem o-- BookingManager
HotelSystem o-- RoomManager
HotelSystem o-- UserManager
HotelSystem o-- PaymentManager
HotelSystem --> User : currentUser
Main --> HotelSystem : uses

BookingManager "1" *-- "*" Booking : manages
RoomManager "1" *-- "*" Room : contains
UserManager "1" *-- "*" User : maintains
PaymentManager "1" *-- "*" Payment : manages

Guest -- Booking : "0..*" : bookings
Booking --> Room : references
Booking --> Guest : references
Payment --> Booking : references

Room <|-- StandardRoom
Room <|-- SuperiorRoom
Room <|-- SuiteRoom

User <|-- Admin
User <|-- ReceptionStaff
User <|-- Manager
User <|-- Cleaner
User <|-- Guest

@enduml
